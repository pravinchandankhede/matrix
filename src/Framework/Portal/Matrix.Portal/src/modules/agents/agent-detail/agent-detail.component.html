<div class="agent-detail">
    <div class="header">
        <h2>{{ isNew ? 'New Agent' : 'Agent Details' }}</h2>
        <div class="header-actions">
            <button class="save-btn" (click)="saveItem()">
                <mat-icon>save</mat-icon> {{ isNew ? 'Create' : 'Save' }}
            </button>
            <button *ngIf="!isNew && item?.agentUId" class="delete-btn" (click)="deleteItem()">
                <mat-icon>delete</mat-icon> Delete
            </button>
        </div>
    </div>

    <div class="content" *ngIf="item">
        <div class="detail-section">
            <h3>Basic Information</h3>
            <div class="detail-row">
                <mat-icon>fingerprint</mat-icon>
                <span class="label">Agent UID:</span>
                <span>{{ item.agentUId }}</span>
            </div>
            <div class="detail-row">
                <mat-icon>person</mat-icon>
                <span class="label">Name:</span>
                <input type="text" [(ngModel)]="item.name" placeholder="Enter agent name">
            </div>
            <div class="detail-row" *ngIf="item.description">
                <mat-icon>description</mat-icon>
                <span class="label">Description:</span>
                <textarea [(ngModel)]="item.description" placeholder="Enter agent description"></textarea>
            </div>
            <div class="detail-row" *ngIf="item.type">
                <mat-icon>category</mat-icon>
                <span class="label">Type:</span>
                <input type="text" [(ngModel)]="item.type" placeholder="Enter agent type">
            </div>
            <div class="detail-row" *ngIf="item.status">
                <mat-icon>info</mat-icon>
                <span class="label">Status:</span>
                <select [(ngModel)]="item.status">
                    <option value="Active">Active</option>
                    <option value="Inactive">Inactive</option>
                    <option value="Maintenance">Maintenance</option>
                </select>
            </div>
            <div class="detail-row" *ngIf="item.version">
                <mat-icon>settings</mat-icon>
                <span class="label">Version:</span>
                <input type="text" [(ngModel)]="item.version" placeholder="Enter version">
            </div>
        </div>

        <div class="detail-section" *ngIf="item.capabilities && item.capabilities.length > 0">
            <h3>Capabilities</h3>
            <div class="capabilities-list">
                <div *ngFor="let capability of item.capabilities" class="capability-item">
                    <h4>{{ capability.name }}</h4>
                    <p *ngIf="capability.description">{{ capability.description }}</p>
                    <span class="type-badge">{{ capability.type }}</span>
                </div>
            </div>
        </div>

        <div class="detail-section" *ngIf="item.features && item.features.length > 0">
            <h3>Features</h3>
            <div class="features-list">
                <div *ngFor="let feature of item.features" class="feature-item">
                    <h4>{{ feature.name }}</h4>
                    <p *ngIf="feature.description">{{ feature.description }}</p>
                    <span class="type-badge">{{ feature.type }}</span>
                </div>
            </div>
        </div>

        <div class="detail-section" *ngIf="item.tools && item.tools.length > 0">
            <h3>Tools</h3>
            <div class="tools-list">
                <div *ngFor="let tool of item.tools" class="tool-item">
                    <h4>{{ tool.name }}</h4>
                    <p *ngIf="tool.description">{{ tool.description }}</p>
                    <span class="type-badge">{{ tool.type }}</span>
                </div>
            </div>
        </div>

        <div class="detail-section">
            <h3>Audit Information</h3>
            <div class="detail-row">
                <mat-icon>person_add</mat-icon>
                <span class="label">Created By:</span>
                <span>{{ item.createdBy }}</span>
            </div>
            <div class="detail-row">
                <mat-icon>schedule</mat-icon>
                <span class="label">Created Date:</span>
                <span>{{ item.createdDate | date:'medium' }}</span>
            </div>
            <div class="detail-row" *ngIf="item.modifiedBy">
                <mat-icon>edit</mat-icon>
                <span class="label">Modified By:</span>
                <span>{{ item.modifiedBy }}</span>
            </div>
            <div class="detail-row" *ngIf="item.modifiedDate">
                <mat-icon>update</mat-icon>
                <span class="label">Modified Date:</span>
                <span>{{ item.modifiedDate | date:'medium' }}</span>
            </div>
        </div>
    </div>

    <div class="footer">
        <button class="back-btn" (click)="router.navigate(['/agents'])">
            <mat-icon>arrow_back</mat-icon> Back to Agents
        </button>
    </div>
</div>
